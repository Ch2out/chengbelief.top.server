"use strict";(self["webpackChunkmessage_project"]=self["webpackChunkmessage_project"]||[]).push([[513],{6513:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-box",staticStyle:{height:"100%"}},[t("el-card",{staticClass:"box-card crd flex-box",staticStyle:{height:"auto"}},[t("el-form",[t("el-form-item",{attrs:{label:"当前手机号"}},[t("el-input",{attrs:{placeholder:"绑定手机号或更换手机号"},model:{value:e.phoneInfo.phone,callback:function(t){e.$set(e.phoneInfo,"phone",t)},expression:"phoneInfo.phone"}})],1),t("el-form-item",[t("div",{staticClass:"flex-box",staticStyle:{"justify-content":"space-around"}},[e._v(" 图片验证码："),t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"图片验证码"},model:{value:e.phoneInfo.imageCode,callback:function(t){e.$set(e.phoneInfo,"imageCode",t)},expression:"phoneInfo.imageCode"}}),t("div",{staticClass:"flex-box",on:{click:e.createImg}},[t("img",{attrs:{src:e.img}})])],1)]),t("el-form-item",{staticClass:"flex-box"},[t("el-button",{attrs:{type:"success"},on:{click:e.sendPhone}},[e._v("发送验证码")])],1),t("el-form-item",[t("div",{staticClass:"flex-box",staticStyle:{"justify-content":"space-around"}},[e._v(" 手机验证码："),t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"手机验证码",disabled:e.phoneDisabled},model:{value:e.phoneInfo.code,callback:function(t){e.$set(e.phoneInfo,"code",t)},expression:"phoneInfo.code"}})],1)]),t("el-form-item",{staticClass:"flex-box"},[t("el-button",{attrs:{type:"primary"},on:{click:e.updatePhone}},[e._v("确定修改")])],1)],1)],1)],1)},a=[],n=o(3685),i={data(){return{phoneDisabled:!0,phonePopover:!1,phoneInfo:{code:"",phone:"",imageCode:""},img:""}},methods:{createImg(){n.Z.NoAjax("/tool/getImageCode",{},(e=>{this.img=e.message}))},sendPhone(){delete this.phoneInfo.code,n.Z.NoAjax("/tool/sendValidateCode",this.phoneInfo,(e=>{e.success?(this.phoneDisabled=!1,this.phonePopover=!0,this.$message(e.message)):("验证码长期有效，无需重复发送"==e.message?(this.phoneDisabled=!1,this.phonePopover=!0):(this.phoneInfo.imgCode="",this.createImg()),this.$message(e.message))}),!0)},updatePhone(){n.Z.NoAjax("/user/auth/updateUserPhone",this.phoneInfo,(e=>{this.$message(e.message),this.$store.dispatch("updatedUser"),this.phoneInfo.imgCode="",this.createImg(),this.phoneInfo={code:"",phone:"",imageCode:""}}))}},created(){this.createImg(),this.phoneInfo.phone=this.$store.state.user.tbUserInfo.phone}},h=i,l=o(1001),c=(0,l.Z)(h,s,a,!1,null,"5cfc07a1",null),p=c.exports}}]);
//# sourceMappingURL=513.e37d9490.js.map